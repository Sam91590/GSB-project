<app-navbar></app-navbar>

<h2>
  Gestion de rapport de visites
</h2>

 <nav class="navbar navbar-inverse">
  <ul class="nav navbar-nav" style ="display:flex; flex-direction:row; ">
  <li><a (click)="modifierRapport()">Modifier un rapport</a></li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <li><a (click)="ajouterRapport()">Ajouter un rapport</a></li>
  </ul>
</nav>

 <div *ngIf="gestionMajRapport">
   <div class="col-lg-6">
     <div class="form-group">
       <label for="date">Date de la visite </label>
       <input id="date" type="date" [(ngModel)]="dateVisite" (change)="chargerVisites()" />
     </div>
   </div>
   <br><br>
   {{titre}}
   <div class="list-group">
     <ul>
       <li class="list-group-item" *ngFor="let rapport of lesRapports" (click)="selectionner(rapport)">
         {{rapport.nomMedecin}} {{rapport.prenomMedecin}}
       </li>
     </ul>
   </div>
 </div>

 <form class="col-lg-6" name="frmRapport" *ngIf="afficherRapport" (ngSubmit)="valider()">
   <div class="form-group">
     <label for="motif">Motif</label>
     <textarea rows="3" cols="30" required="true" [(ngModel)]="rapport.motif" name="motif"></textarea>
   </div>
   <div>
    <label for="bilan">Bilan</label>
    <textarea rows="3" cols="30" required="true" [(ngModel)]="rapport.bilan" name="bilan"></textarea>
   </div>
   <button type="submit">Valider</button>
  </form>

  <div *ngIf="gestionAjoutRapport">
    <div class="col-lg-6">
      <div class="form-group">
        <label for="medecin">Selectionner le medecinn </label>
        <input type="search" placeholder="Nom du médecin..." [(ngModel)]="nomMedecin" (keyup)="chargerMedecins()" id="medecin"/>
      </div>
    </div>
    <div class="list-group">
      <ul>
        <li class="list-group-item" *ngFor="let medecin of lesMedecins" (click)="selectionnerMedecin(medecin)">{{medecin.nom}} {{medecin.prenom}} ;departement :{{medecin.departement}}</li>
      </ul>
    </div>

    <form class="col-lg-6" (ngSubmit)="enregistrer()">
      <div class="form-group">
        <label for="motif">Motif</label>
        <textarea type="text" [(ngModel)]="motif" class="form-control" required="true" name="motif"></textarea>
      </div>
      <div class="form-group">
        <label for="bilan">Bilan</label>
        <textarea type="text" [(ngModel)]="bilan" class="form-control" required="true" name="bilan"></textarea>
      </div>
      <div class="form-group">
        <label for="date">Date</label>
        <input type="date" required="true" [(ngModel)]="dateNouveauRapport" name="date"/>
      </div>


    <h2>Médicaments offerts</h2>
    <div>
      <table>
        <tr>
          <td>
            <div class="col-lg-6">
              <div class="form-group">
                <input type="search" [(ngModel)]="nomMedicament" (keyup)="chargerMedicaments()" placeholder="Nom du médicament…" name="nomMedicament"/>
              </div>
            </div>
            <br><br>
            <div class="list-group">
              <ul>
                <li class="list-grou-item" *ngFor="let medicament of lesMedicaments" (click)="choisirMedicament(medicament)">{{medicament.nomCommercial}}</li>
              </ul>
            </div>
          </td>
          <td>
            <div class="form-group">
            <label for="qteSelect">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quantité</label>
            <select [(ngModel)]="qteSelect" class="form-control" name="qteSelect">
              <option *ngFor="let qte of qtes" value="{{qte}}">{{qte}}</option>
            </select>
          </div>
        </td>
       </tr>
       <tr>
         <td>
           <div class="btn-group">
             <button type="button" class="btn btn-primary btn-lg" (click)="ajouter()">Ajouter</button>
             <button type="buttin" class="btn btnn-primary btn-lg" (click)="retirer()">Retirer</button>
           </div>
         </td>
         <td>
           <ul>
             <li *ngFor="let med of medicamentsSelect">{{med.nom}} : {{med.qte}}</li>
           </ul>
         </td>
       </tr>
      </table>
    </div>
    <button type="submit" class="btn-group btn-group-justified">Enregistrer</button>
    <div class={{typeMessage}}>{{messageEnregistrement}}</div>
    </form>

  </div>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>